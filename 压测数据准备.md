# 秒杀接口压测数据准备

## 📊 业务数据分析（基于之前测试结果）

### 商品库存状态
| 商品编码 | 商品名称 | 当前库存/总库存 | 秒杀状态 | 价格 |
|---------|---------|----------------|----------|------|
| IPHONE15PRO | iPhone 15 Pro | 48/50 | 秒杀中 | ¥6,999 |
| MACBOOKAIR | MacBook Air | 18/20 | 已结束 | ¥7,999 |
| AIRPODSPRO | AirPods Pro | 100/100 | 已结束 | ¥1,399 |
| IPADAIR | iPad Air | 30/30 | 已结束 | ¥3,899 |
| XIAOMI13ULTRA | 小米13 Ultra | 78/80 | 秒杀中 | ¥4,999 |

### 有效压测商品（基于当前时间窗口）
- **IPHONE15PRO**: 库存48件，价格¥6,999
- **XIAOMI13ULTRA**: 库存78件，价格¥4,999

## 🔧 测试数据生成

### JMeter CSV测试数据文件

创建 `test-data.csv` 文件：
```csv
userId,productCode,quantity
1001,IPHONE15PRO,1
1002,IPHONE15PRO,1
1003,IPHONE15PRO,1
1004,IPHONE15PRO,1
1005,IPHONE15PRO,1
1006,XIAOMI13ULTRA,1
1007,XIAOMI13ULTRA,1
1008,XIAOMI13ULTRA,1
1009,XIAOMI13ULTRA,1
1010,XIAOMI13ULTRA,1
```

### 数据分布分析
- **总测试用户**: 10个唯一用户ID
- **商品分布**: 5个用户抢购iPhone，5个用户抢购小米
- **购买限制**: 每人限购1件，符合业务规则
- **预期成功率**: 基于之前测试，单用户重复购买会被拒绝

### 压测梯度设计（基于4核8GB机器，QPS目标500）

| 梯度 | 并发数 | 预期QPS | 持续时间 | 主要目标 |
|------|--------|---------|----------|----------|
| 1 | 250 | 250 | 7分钟 | 基础性能验证 |
| 2 | 500 | 500 | 7分钟 | 目标QPS验证 |
| 3 | 600 | 550 | 7分钟 | 极限压力测试 |

### 测试场景覆盖
1. **正常购买流程** - 有效用户和商品
2. **重复购买拦截** - 同一用户重复购买被拒绝
3. **库存扣减验证** - 库存正确减少
4. **参数验证测试** - 非法参数处理
5. **业务规则验证** - 限购机制有效

## 📝 测试数据注意事项

1. **用户ID唯一性**: 确保每个用户ID只出现一次，避免重复购买测试
2. **商品选择**: 只选择当前秒杀时间窗口内的商品
3. **数据量**: 每次梯度测试期间，总请求数应超过可用库存（126件）
4. **错误处理**: 预期部分请求会因为重复购买、库存不足等原因失败
